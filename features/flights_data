import requests

# Define the API endpoint for domestic flights (replace with your actual endpoint)
flights_endpoint = "https://api.example.com/domestic-flights"
user_endpoint = "https://api.example.com/domestic-flights"

# Sample user profile
user_profile = {
    "status": "Senior",
    "hours": 10,
    "base": "Dallas",
    "destination": "Atlanta",
    "aircraft": "Wide"
}

def get_domestic_flights(flights_endpoint, user_profile): #replace with user endpoint later
    try:
        # Make an API request
        response = requests.get(flights_endpoint)
        
        # Check if the request was successful (status code 200)
        if response.status_code == 200:
            flight_data = response.json()
            # Iterate through the flight data and filter based on user profile
            matching_flights = []
            for flight in flight_data:
                if (
                    flight["base"] == user_profile["base"]
                    and flight["destination"] == user_profile["destination"]
                    and flight["aircraft"] == user_profile["aircraft"]
                    and flight["hours"] <= flight["hours"]
                ):
                    matching_flights.append(flight)
            
            # Display the matching flights
            if matching_flights:
                print("Matching Flights:")
                for flight in matching_flights:
                    print(flight)
            else:
                print("No matching flights found.")
        else:
            print("API request failed with status code:", response.status_code)

    except requests.exceptions.RequestException as e:
        print("API request error:", e)

if __name__ == "__main__":
    get_domestic_flights(flights_endpoint, user_profile)


'''
its really just a GET the api endpoint that I create and then returning the json file of the different flights onto the page
This is a new feature that is going to be added to the pbs they already have

if the cards parameters matches the user parameters such as the type of aircraft, the hours of time as
long as its within the duration of the hours the pilot has left, 
'''